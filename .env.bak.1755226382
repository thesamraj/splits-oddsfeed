POSTGRES_USER=odds
POSTGRES_PASSWORD=odds
POSTGRES_DB=oddsfeed
DATABASE_URL=postgresql://odds:odds@store:5432/oddsfeed
REDIS_URL=redis://broker:6379/0
REGION=CA
PROXY_MANAGER_URL=

# Aggregator (Odds API) real-mode settings
AGG_BASE_URL=https://api.the-odds-api.com/v4
AGG_API_KEY=    # set only in local .env, NEVER commit a real key
AGG_SPORT=americanfootball_nfl
AGG_MARKETS=h2h,spreads,totals
AGG_REGION=us
AGG_USE_MOCK=true
AGG_FETCH_INTERVAL=300          # seconds between requests (cost control)
AGG_DAILY_REQUEST_BUDGET=250    # daily API call limit for cost control
AGG_BUDGET_MIN_REMAINING=10     # hard stop when remaining budget drops below this
AGG_BUDGET_REDIS_KEY=agg:budget  # Redis key prefix for budget tracking (date appended)

# Normalizer data quality settings
NORM_SANITY_PRICE_RANGE=-2000,2000      # American odds range for sanity checks
NORM_SANITY_TOTAL_SPREAD_RANGE=0,200    # Point range for totals and spreads

# BetRivers (Kambi) collector settings
KAMBI_BASE_URL=https://e0-api.kambi.com/offering/v2018
KAMBI_BRAND=betrivers
KAMBI_LOCALE=en_US
KAMBI_SPORT=american_football
KAMBI_LEAGUE=nfl
KAMBI_POLL_INTERVAL=5
KAMBI_USE_MOCK=false
KAMBI_STATE_HOST=pa.betrivers.com
KAMBI_IMPERSONATE=chrome120
KAMBI_WARMUP=true
KAMBI_BOOTSTRAP_ENABLED=true
KAMBI_BOOTSTRAP_PATH=artifacts/kambi_bootstrap.json
PROXY_URL=
PROXY_ROTATE_AFTER_ERRORS=3
PROXY_LEASE_PATH=/lease
PROXY_RELEASE_PATH=/release
PROXY_BOOK=kambi
PROXY_REGION=us
PROXY_MANAGER_URL=

# Browser relay defaults
KAMBI_STATE_URL=https://pa.betrivers.com/?page=sportsbook#american_football/nfl
KAMBI_CAPTURE_PATTERNS=/offering/.*(v2018|events|selections)|e0-api.kambi.com/.*
KAMBI_BROWSER_HEADFUL=false
KAMBI_LAST_RESORT_AFTER_SEC=8
KAMBI_NAV_TIMEOUT_SEC=25
KAMBI_BROWSER_METRICS_PORT=9118
PIN_USE_MOCK=true

COLLECTOR_PINNACLE_IMAGE=ghcr.io/thesamraj/splits-oddsfeed/collector-pinnacle:sha-01d282c

KAMBI_BROWSER_ENABLED=true

API_DEFAULT_MINUTES=10

KAMBI_TARGET_SECTIONS=NFL,MLB,NBA,NHL,NCAAF,TENNIS

KAMBI_BROWSER_MAX_EVENTS=8

KAMBI_BROWSER_MAX_CONCURRENCY=4

KAMBI_MIN_EVENTS_TARGET=3

COLLECTOR_KAMBI_BROWSER_IMAGE=splits-oddsfeed-collector-kambi-browser:latest
KAMBI_BROWSER_MAX_TABS=12
KAMBI_BROWSER_CONCURRENCY=6
KAMBI_BROWSER_SECTIONS=NFL,MLB,NBA,NHL,NCAAF,TENNIS
